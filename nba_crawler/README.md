# NBA 数据分析系统

这是一个功能强大的 NBA 数据爬取与可视化分析系统。它能够从 NBA 官方、ESPN 和虎扑体育爬取最新的球队与球员数据，并通过交互式仪表板进行深度数据可视化和对比分析。

## 🚀 主要功能

### 1. 数据爬虫 (`nba_crawler`)
- **多源数据支持**：集成 NBA 官方 API、ESPN 和虎扑数据源。
- **多赛季支持**：支持爬取和存储多个赛季的历史数据。
- **中文本地化**：自动将球员英文名映射为中文名，支持中文搜索。
- **数据完整性**：涵盖球员基础数据、进阶数据、球队战绩、薪资等多维度信息。

### 2. 数据分析仪表板 (`nba_dashboard.py`)
基于 Streamlit 构建的交互式分析平台，包含以下模块：

- **📊 数据概览**：查看联盟整体数据分布，支持按球队筛选和球员搜索。
- **📈 进阶图表**：
  - **球队得分分布**：可视化查看球队内部得分占比。
  - **效率分析 (散点图)**：在得分、命中率、助攻等维度分析球员效率。
  - **180俱乐部追踪**：分析接近或达到 "50-40-90" 命中率的精英射手。
  - **生涯轨迹分析**：可视化球员跨赛季的数据变化趋势（支持数据表格和折线图）。
- **🆚 球员对比**：
  - **跨赛季对比**：**[新功能]** 支持对比同一球员在不同赛季的表现，或不同球员的对比。
  - **雷达图分析**：基于 10 个维度的复合评分（2K风格）进行全方位能力对比。
- **🏢 球队分析**：
  - **多赛季支持**：**[新功能]** 支持切换赛季查看不同年份的球队数据。
  - **攻防能力对比**：通过雷达图对比两支球队的各项场均数据和联盟排名。
- **🎮 娱乐功能**：自定义创建虚拟球员并与现役球星进行数据对比。

## 🛠️ 安装与配置

### 1. 环境要求
- Python 3.8+
- 依赖库：`pandas`, `requests`, `streamlit`, `plotly`, `nba_api`, `beautifulsoup4`, `lxml`

### 2. 安装依赖
```bash
pip install -r requirements.txt
```
*(如果根目录没有 `requirements.txt`，请安装上述提到的库)*

## 📖 使用指南

### 1. 运行数据爬虫
爬取最新数据并保存到本地：

```bash
# 爬取当前赛季数据
python main.py

# 爬取特定赛季数据 (例如 2023-24)
python main.py --season 2023-24
```
*数据默认保存在 `output/` 目录下。*

### 2. 启动分析仪表板
启动 Streamlit Web 应用：

```bash
streamlit run nba_dashboard.py
```
启动后，浏览器会自动打开 `http://localhost:8501`。

## 📂 项目结构

```
nba_crawler/
├── main.py              # 爬虫入口程序
├── nba_api_crawler.py   # NBA 官方 API 爬虫
├── espn_crawler.py      # ESPN 数据爬虫
├── add_chinese_names.py # 中文名映射工具
├── nba_dashboard.py     # Streamlit 仪表板主程序
├── config.py            # 项目配置文件
├── parsers/             # 数据解析模块
├── output/              # 数据存储目录
│   └── NBA官方统计/      # 清洗后的完整统计数据
└── requirements.txt     # 项目依赖
```

## ✨最近更新
- **修复与优化**：解决了生涯数据统计不更新的问题，修复了百分比数据显示异常。
- **功能增强**：在"球员对比"和"球队分析"页面添加了独立的赛季选择功能，支持跨赛季深度分析。
